<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Stay Solved — Collaboration Form</title>
  <style>
    :root{
      --bg:#0f1724; 
      --card:#0b1220;
      --muted:#9aa4b2;
      --accent:#f5efe6; 
      --accent-2:#c9bfb4;
      --success:#1f8a4f;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#071124 0%,var(--bg) 100%);color:var(--accent);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}

    .wrap{width:100%;max-width:920px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);padding:28px;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}

    /* header */
    .brand{display:flex;gap:16px;align-items:center;margin-bottom:18px}
    .logo{width:68px;height:68px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#111827,#0b1220);box-shadow:inset 0 -2px 0 rgba(255,255,255,0.02)}
    .logo .dollar{font-weight:700;font-size:28px;color:var(--accent);letter-spacing:2px}
    .brand h1{margin:0;font-size:20px;letter-spacing:0.6px}
    .brand p{margin:0;color:var(--muted);font-size:13px}

    /* form layout */
    form{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type=text], input[type=email], select, textarea{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--accent);outline:none}
    textarea{min-height:120px;resize:vertical}

    .full{grid-column:1/-1}
    .actions{display:flex;gap:12px;align-items:center;justify-content:flex-end;margin-top:12px}

    .btn{padding:10px 16px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn-primary{background:var(--accent);color:#071124}
    .btn-ghost{background:transparent;color:var(--accent);border:1px solid rgba(255,255,255,0.04)}

    .hint{font-size:12px;color:var(--muted)}
    .file-row{display:flex;gap:10px;align-items:center}

    .msg{padding:10px;border-radius:10px;margin-top:12px;font-size:14px}
    .msg.ok{background:rgba(31,138,79,0.12);color:var(--success);border:1px solid rgba(31,138,79,0.2)}
    .msg.err{background:rgba(210,60,70,0.07);color:#ffb3b3;border:1px solid rgba(210,60,70,0.12)}

    @media (max-width:720px){form{grid-template-columns:1fr} .actions{justify-content:stretch}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="region" aria-labelledby="collab-title">
      <div class="brand">
        <div class="logo" aria-hidden="true"><div class="dollar">$$</div></div>
        <div>
          <h1 id="collab-title">Stay Solved — Collaboration</h1>
          <p>Drop your details and a short brief. We'll review and get back within 2 business days.</p>
        </div>
      </div>

      <form id="collabForm" novalidate>
        <div>
          <label for="name">Your name</label>
          <input id="name" name="name" type="text" placeholder="Your Name" required />
        </div>

        <div>
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required />
        </div>

        <div>
          <label for="org">Organization / Company</label>
          <input id="org" name="organization" type="text">
        </div>

        <div>
          <label for="role">Role</label>
          <select id="role" name="role" aria-label="Your role">
            <option value="">-- select --</option>
            <option>Founder</option>
            <option>Marketing</option>
            <option>Product</option>
            <option>Investor</option>
            <option>Other</option>
          </select>
        </div>

        <div class="full">
          <label for="brief">Project brief (short)</label>
          <textarea id="brief" name="brief" placeholder="Describe what you'd like to collaborate on..." required></textarea>
        </div>

        <div>
          <label for="budget">Estimated budget (optional)</label>
          <input id="budget" name="budget" type="text">
        </div>

        <div>
          <label for="timeline">Timeline (approx)</label>
          <input id="timeline" name="timeline" type="text" placeholder="eg. 4 weeks / Q2 2026" />
        </div>

        <div class="full">
          <label for="file">Attach file (pitch deck, brief) — optional</label>
          <div class="file-row">
            <input id="file" name="file" type="file" accept=".pdf,.doc,.docx,.ppt,.pptx,image/*" />
            <div id="fileName" class="hint">No file chosen</div>
          </div>
        </div>

        <div class="full">
          <label><input id="agree" name="agree" type="checkbox" required /> I agree to be contacted about this collaboration.</label>
        </div>

        <div class="full actions">
          <button type="button" class="btn btn-ghost" id="resetBtn">Reset</button>
          <button type="submit" class="btn btn-primary">Send request</button>
        </div>

        <div id="formMsg" class="full" aria-live="polite"></div>
      </form>
    </div>
  </div>

  <script>
    const form = document.getElementById('collabForm');
    const fileInput = document.getElementById('file');
    const fileNameEl = document.getElementById('fileName');
    const msgEl = document.getElementById('formMsg');
    const resetBtn = document.getElementById('resetBtn');

    
    fileInput.addEventListener('change', () => {
      if (fileInput.files && fileInput.files.length) fileNameEl.textContent = fileInput.files[0].name;
      else fileNameEl.textContent = 'No file chosen';
    });

    resetBtn.addEventListener('click', () => {
      form.reset();
      fileNameEl.textContent = 'No file chosen';
      msgEl.innerHTML = '';
    });

    function showMessage(text, ok = true){
      msgEl.innerHTML = `<div class="msg ${ok? 'ok' : 'err'}">${text}</div>`;
    }

    
    function validate(formData){
      const name = formData.get('name')?.trim();
      const email = formData.get('email')?.trim();
      const brief = formData.get('brief')?.trim();
      const agree = formData.get('agree');
      if (!name) return 'Please enter your name.';
      if (!email) return 'Please enter a valid email.';
      if (!brief) return 'Please add a short project brief.';
      if (!agree) return 'Please confirm we can contact you.';
      return null;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msgEl.innerHTML = '';

      const fd = new FormData(form);
      const err = validate(fd);
      if (err){ showMessage(err, false); return; }

      
      showMessage('Sending... please wait.');

      try{
        const response = await fetch('/api/collab', {
          method: 'POST',
          body: fd
        });

        if (response.ok){
          showMessage('Thanks — your collaboration request has been submitted. We will reply soon.');
          form.reset(); fileNameEl.textContent = 'No file chosen';
        } else {
          // try to parse server error
          const text = await response.text();
          showMessage('Server error: ' + (text || response.statusText), false);
        }
      }catch(err){
        
        console.warn('Submit fallback — no /api/collab endpoint found. Form payload:');
        const demo = {};
        fd.forEach((v,k)=>{ demo[k] = v instanceof File ? v.name : v });
        console.table(demo);
        showMessage('Demo mode: request logged to console. In production, set up /api/collab to receive submissions.');
      }
    });
  </script>
</body>
</html>
